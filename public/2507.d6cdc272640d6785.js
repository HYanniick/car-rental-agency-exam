"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2507],{2507:(v,P,s)=>{s.r(P),s.d(P,{CarCreatePage:()=>f});var h=s(177),n=s(4341),a=s(4742),e=s(4438),_=s(3080),p=s(7235);function d(r,m){if(1&r&&e.nrm(0,"img",15),2&r){const c=e.XpG();e.Y8G("src",c.previewFrontPhoto,e.B4B)}}function C(r,m){if(1&r&&e.nrm(0,"img",16),2&r){const c=e.XpG();e.Y8G("src",c.previewBackPhoto,e.B4B)}}let f=(()=>{var r;class m{constructor(o,t){this.router=o,this.carService=t,this.carForm=new n.gE({brand:new n.MJ("",[n.k0.required]),model:new n.MJ("",[n.k0.required]),licensePlate:new n.MJ("",[n.k0.required])}),this.frontPhotoBase64=null,this.backPhotoBase64=null,this.previewFrontPhoto=null,this.previewBackPhoto=null,this.ngOnInit=()=>{}}onSaveCar(){var o,t,i;if(this.carForm.invalid||!this.frontPhotoBase64||!this.backPhotoBase64)return;const l=this.carForm.value,g={licensePlate:null!==(o=l.licensePlate)&&void 0!==o?o:"",brand:null!==(t=l.brand)&&void 0!==t?t:"",model:null!==(i=l.model)&&void 0!==i?i:"",photos:{front:this.frontPhotoBase64,back:this.backPhotoBase64}};this.carService.saveCar(g).then(()=>{this.router.navigate(["/car"])}).catch(u=>{console.error("Erreur lors de la cr\xe9ation de la voiture:",u)})}onFileChange(o,t){const i=o.target;if(!i.files||0===i.files.length)return;const l=i.files[0],g=new FileReader;g.onload=()=>{const u=g.result;"frontPhoto"===t?(this.frontPhotoBase64=u,this.previewFrontPhoto=u):(this.backPhotoBase64=u,this.previewBackPhoto=u)},g.readAsDataURL(l)}}return(r=m).\u0275fac=function(o){return new(o||r)(e.rXU(_.Ix),e.rXU(p.K))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-car-create"]],standalone:!0,features:[e.aNF],decls:33,vars:5,consts:[[1,"car-create",3,"fullscreen"],[1,"ion-justify-content-center","ion-align-items-center",2,"height","calc(100vh - 75px)"],["size","12","size-md","6","size-lg","4"],[1,"form-container"],["ngSrc","./assets/CarRentalAgencyLogo.png","priority","","alt","Car Rental Agency Logo","width","100","height","120",1,"logo"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","brand","required",""],["formControlName","model","required",""],["formControlName","licensePlate","required",""],[1,"photo-upload"],["type","file","accept","image/*",3,"change"],["alt","Pr\xe9visualisation avant",3,"src",4,"ngIf"],["alt","Pr\xe9visualisation arri\xe8re",3,"src",4,"ngIf"],["expand","full","type","submit",3,"disabled"],["alt","Pr\xe9visualisation avant",3,"src"],["alt","Pr\xe9visualisation arri\xe8re",3,"src"]],template:function(o,t){1&o&&(e.j41(0,"ion-content",0)(1,"ion-grid")(2,"ion-row",1)(3,"ion-col",2)(4,"div",3),e.nrm(5,"img",4),e.j41(6,"h1"),e.EFF(7,"Cr\xe9ation d'une voiture"),e.k0s(),e.j41(8,"form",5),e.bIt("ngSubmit",function(){return t.onSaveCar()}),e.j41(9,"ion-item")(10,"ion-label",6),e.EFF(11,"Marque"),e.k0s(),e.nrm(12,"ion-input",7),e.k0s(),e.j41(13,"ion-item")(14,"ion-label",6),e.EFF(15,"Mod\xe8le"),e.k0s(),e.nrm(16,"ion-input",8),e.k0s(),e.j41(17,"ion-item")(18,"ion-label",6),e.EFF(19,"Plaque d'immatriculation"),e.k0s(),e.nrm(20,"ion-input",9),e.k0s(),e.j41(21,"div",10)(22,"label"),e.EFF(23,"Photo avant :"),e.k0s(),e.j41(24,"input",11),e.bIt("change",function(l){return t.onFileChange(l,"frontPhoto")}),e.k0s(),e.DNE(25,d,1,1,"img",12),e.k0s(),e.j41(26,"div",10)(27,"label"),e.EFF(28,"Photo arri\xe8re :"),e.k0s(),e.j41(29,"input",11),e.bIt("change",function(l){return t.onFileChange(l,"backPhoto")}),e.k0s(),e.DNE(30,C,1,1,"img",13),e.k0s(),e.j41(31,"ion-button",14),e.EFF(32," Enregistrer la voiture "),e.k0s()()()()()()()),2&o&&(e.Y8G("fullscreen",!0),e.R7$(8),e.Y8G("formGroup",t.carForm),e.R7$(17),e.Y8G("ngIf",t.previewFrontPhoto),e.R7$(5),e.Y8G("ngIf",t.previewBackPhoto),e.R7$(),e.Y8G("disabled",t.carForm.invalid||!t.frontPhotoBase64||!t.backPhotoBase64))},dependencies:[h.MD,h.bT,a.bv,a.Jm,a.hU,a.W9,a.lO,a.$w,a.uz,a.he,a.ln,a.Gw,n.YN,n.qT,n.BC,n.cb,n.YS,n.X1,n.j4,n.JD,h.kt],styles:[".car-create[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{background-color:var(--ion-color-light);padding:50px;border-radius:8px;text-align:center}.car-create[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5rem;color:#222428;font-weight:700}.car-create[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:20px}.car-create[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]{margin:20px 0;text-align:left}.car-create[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.9rem;color:var(--ion-color-dark)}.car-create[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{margin-bottom:10px}.car-create[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;border:1px solid var(--ion-color-medium);border-radius:4px;margin-top:10px}.car-create[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:20px}"]}),m})()}}]);