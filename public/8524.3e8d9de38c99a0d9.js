"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8524],{8524:(x,_,a)=>{a.r(_),a.d(_,{CarPage:()=>D});var g=a(467),l=a(177),u=a(4341),i=a(4742),d=a(5873),p=a(5079),n=a(4438),C=a(3080),P=a(7235),h=a(5670),m=a(4729);function f(r,c){if(1&r){const o=n.RV6();n.j41(0,"ion-button",4),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.navigateToProfile())}),n.nrm(1,"ion-icon",5),n.k0s()}}function v(r,c){if(1&r){const o=n.RV6();n.j41(0,"ion-button",4),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.navigateToLogin())}),n.nrm(1,"ion-icon",5),n.k0s()}}function E(r,c){if(1&r){const o=n.RV6();n.j41(0,"ion-button",4),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onCreationCar())}),n.nrm(1,"ion-icon",6),n.k0s(),n.j41(2,"ion-button",4),n.bIt("click",function(){n.eBV(o);const e=n.XpG();return n.Njj(e.onLogout())}),n.nrm(3,"ion-icon",7),n.k0s()}}function M(r,c){if(1&r&&n.nrm(0,"img",9),2&r){const o=n.XpG().$implicit;n.Y8G("src",null==o||null==o.photos?null:o.photos.front,n.B4B)}}function O(r,c){if(1&r){const o=n.RV6();n.j41(0,"ion-card",4),n.bIt("click",function(){const e=n.eBV(o).$implicit,s=n.XpG();return n.Njj(s.seeDetailsCar(e))}),n.j41(1,"ion-card-header")(2,"ion-card-title"),n.EFF(3),n.k0s()(),n.j41(4,"ion-card-content"),n.DNE(5,M,1,1,"img",8),n.j41(6,"p")(7,"strong"),n.EFF(8,"License Plate:"),n.k0s(),n.EFF(9),n.k0s()()()}if(2&r){const o=c.$implicit;n.R7$(3),n.Lme("",o.brand," - ",o.model,""),n.R7$(2),n.Y8G("ngIf",null==o||null==o.photos?null:o.photos.front),n.R7$(4),n.SpI(" ",o.licensePlate,"")}}let D=(()=>{var r;class c{constructor(t,e,s,T){this.router=t,this.carService=e,this.toastController=s,this.authenticationService=T,this.cars=[],this.isLoggedIn=!1,(0,p.a)({powerOutline:d.iG$})}ngOnInit(){this.carService.cars$.subscribe({next:t=>{this.cars=t},error:t=>{console.error("Erreur lors du chargement des voitures:",t),this.errorToast("Failed to load cars. Please try again later.")}}),this.authenticationService.currentUser$.subscribe(t=>{this.isLoggedIn=!!t})}onCreationCar(){this.router.navigate(["/car/create"])}navigateToLogin(){this.router.navigate(["/login"])}seeDetailsCar(t){this.router.navigate([`/car/detail/${t.licensePlate}`])}onLogout(){this.authenticationService.logout().then(()=>{console.log("D\xe9connexion r\xe9ussie"),this.router.navigate(["/login"]),this.successToast("Successfully logged out.")}).catch(t=>{console.error("Error during logout:",t),this.errorToast("An error occurred. Please try again later.")})}errorToast(t){var e=this;return(0,g.A)(function*(){yield(yield e.toastController.create({message:t,duration:3e3,position:"top",color:"danger",buttons:[{text:"Dismiss",role:"cancel"}]})).present()})()}successToast(t){var e=this;return(0,g.A)(function*(){yield(yield e.toastController.create({message:t,duration:3e3,position:"top",color:"success",buttons:[{text:"Dismiss",role:"cancel"}]})).present()})()}navigateToProfile(){this.router.navigate(["/profile"])}}return(r=c).\u0275fac=function(t){return new(t||r)(n.rXU(C.Ix),n.rXU(P.K),n.rXU(h.K_),n.rXU(m.k))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-car"]],standalone:!0,features:[n.aNF],decls:12,vars:4,consts:[["ngSrc","./assets/CarRentalAgencyLogo.png","priority","","alt","Car Rental Agency Logo","width","150","height","200",1,"logo"],["slot","end"],[1,"car-container"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["name","person-circle-sharp"],["name","add-circle"],["name","power-outline"],["alt","Photo avant de la voiture",3,"src",4,"ngIf"],["alt","Photo avant de la voiture",3,"src"]],template:function(t,e){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.nrm(3,"img",0),n.k0s(),n.j41(4,"ion-buttons",1),n.DNE(5,f,2,0,"ion-button")(6,v,2,0,"ion-button"),n.k0s(),n.j41(7,"ion-buttons",1),n.DNE(8,E,4,0),n.k0s()()(),n.j41(9,"ion-content")(10,"div",2),n.DNE(11,O,10,4,"ion-card",3),n.k0s()()),2&t&&(n.R7$(5),n.vxM(e.isLoggedIn?5:-1),n.R7$(),n.vxM(e.isLoggedIn?-1:6),n.R7$(2),n.vxM(e.isLoggedIn?8:-1),n.R7$(3),n.Y8G("ngForOf",e.cars))},dependencies:[l.MD,l.Sq,l.bT,i.bv,i.Jm,i.QW,i.b_,i.I9,i.ME,i.tN,i.W9,i.eU,i.iq,i.BC,i.ai,u.YN,u.X1,l.kt],styles:["#icon-add[_ngcontent-%COMP%]{font-size:2rem}ion-icon[_ngcontent-%COMP%]{color:#000}.logo[_ngcontent-%COMP%]{width:46px;height:auto;margin:20px auto;display:block}ion-toolbar[_ngcontent-%COMP%]{--background: #f4f5f8;padding:15px!important}.car-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;padding:16px}ion-card[_ngcontent-%COMP%]{width:100%;max-width:400px;border-radius:8px;transition:transform .2s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background-color:#222428;color:var(--ion-color-light);padding:16px;border-top-left-radius:8px;border-top-right-radius:8px}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;text-align:center;color:#fff}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px;text-align:left}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:.9rem;color:var(--ion-color-dark)}"]}),c})()}}]);